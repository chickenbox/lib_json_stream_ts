"use strict";var org;!function(t){let r;!function(t){let r;!function(r){let e;!function(t){t[t.byte=0]="byte",t[t.short=1]="short",t[t.int32=2]="int32",t[t.float=3]="float",t[t.double=4]="double",t[t.boolean=5]="boolean",t[t.string=6]="string",t[t.array=7]="array",t[t.object=8]="object",t[t.null=9]="null"}(e||(e={}));r.InputStream=class{constructor(){this.propertyNames=[]}_read(t){switch(t.uint8){case e.byte:return t.int8;case e.short:return t.int16;case e.int32:return t.int32;case e.float:return t.float32;case e.double:return t.float64;case e.boolean:return t.bool;case e.string:return t.string;case e.array:{const e=this._read(t);for(var r=[],i=0;i<e;i++)r.push(this._read(t));return r}case e.null:return null;default:{var s={};const r=this._read(t);for(i=0;i<r;i++)s[this.propertyNames[this._read(t)]]=this._read(t);return s}}}read(r){const e=new t.buffer.Reader(r),i=e.int16;for(var s=0;s<i;s++)this.propertyNames.push(e.tinyString);return this._read(e)}};r.OutputStream=class{constructor(){this.propertyNames=[],this.propertyIndexLookup=new Map,this.writer=new t.buffer.Writer,this.headerWriter=new t.buffer.Writer}index(t){return this.propertyIndexLookup.has(t)||(this.propertyNames.push(t),this.propertyIndexLookup.set(t,this.propertyNames.length-1)),this.propertyIndexLookup.get(t)}_write(t){switch(typeof t){case"number":t%1==0?t>=-128&&t<128?(this.writer.writeUint8(e.byte),this.writer.writeInt8(t)):t>=-32768&&t<32768?(this.writer.writeUint8(e.short),this.writer.writeInt16(t)):t>=-2147483648&&t<2147483648?(this.writer.writeUint8(e.int32),this.writer.writeInt32(t)):(this.writer.writeUint8(e.double),this.writer.writeFloat64(t)):Math.fround(t)==t?(this.writer.writeUint8(e.float),this.writer.writeFloat32(t)):(this.writer.writeUint8(e.double),this.writer.writeFloat64(t));break;case"boolean":this.writer.writeUint8(e.boolean),this.writer.writeBool(t);break;case"string":this.writer.writeUint8(e.string),this.writer.writeString(t);break;default:if(t instanceof Array)for(var r of(this.writer.writeUint8(e.array),this._write(t.length),t))this._write(r);else if(t){this.writer.writeUint8(e.object);var i=[];for(var s in t)t.hasOwnProperty(s)&&i.push(s);for(s of(this._write(i.length),i)){const r=this.index(s);this._write(r),this._write(t[s])}}else this.writer.writeUint8(e.null)}}write(t){const r=this.propertyNames.length;this.writer.reset(),this.headerWriter.reset(),this._write(t),this.headerWriter.writeInt16(this.propertyNames.length-r);for(var e=r;e<this.propertyNames.length;e++)this.headerWriter.writeTinyString(this.propertyNames[e]);return this.headerWriter.writeBytes(new Uint8Array(this.writer.buffer,0,this.writer.length),!1),this.headerWriter.buffer.slice(0,this.headerWriter.length)}}}(r=t.json||(t.json={}))}(r=t.chickenbox||(t.chickenbox={}))}(org||(org={}));